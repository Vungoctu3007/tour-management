CREATE TABLE Customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE,
    phone VARCHAR(15),
    address VARCHAR(200),
    dob DATE
);
CREATE TABLE Tour (
    tour_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    destination VARCHAR(100),
    duration INT,                -- Số ngày của tour
    price DECIMAL(10, 2),        -- Giá mỗi người
    start_date DATE,
    end_date DATE
);
CREATE TABLE Booking (
    booking_id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT,
    tour_id INT,
    booking_date DATE NOT NULL,
    status VARCHAR(20) DEFAULT 'pending',
    total_price DECIMAL(10, 2),
    FOREIGN KEY (customer_id) REFERENCES Customer(customer_id),
    FOREIGN KEY (tour_id) REFERENCES Tour(tour_id)
);
CREATE TABLE TicketType (
    ticket_type_id INT PRIMARY KEY AUTO_INCREMENT,
    type_name VARCHAR(20) NOT NULL,    -- 'adult' hoặc 'child'
    price DECIMAL(10, 2) NOT NULL      -- Giá vé cho từng loại
);
CREATE TABLE BookingTicket (
    booking_ticket_id INT PRIMARY KEY AUTO_INCREMENT,
    booking_id INT,
    ticket_type_id INT,
    quantity INT NOT NULL,
    total_price DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (booking_id) REFERENCES Booking(booking_id),
    FOREIGN KEY (ticket_type_id) REFERENCES TicketType(ticket_type_id)
);
CREATE TABLE TicketDetail (
    ticket_id INT PRIMARY KEY AUTO_INCREMENT,
    booking_id INT,
    customer_name VARCHAR(100) NOT NULL,
    age INT,
    ticket_type_id INT,
    price DECIMAL(10, 2),
    FOREIGN KEY (booking_id) REFERENCES Booking(booking_id),
    FOREIGN KEY (ticket_type_id) REFERENCES TicketType(ticket_type_id)
);
INSERT INTO Customer (name, email, phone, address, dob) VALUES
('Nguyễn Văn A', 'nguyenvana@example.com', '0123456789', '123 Đường A, Quận 1, TP.HCM', '1990-01-01'),
('Trần Thị B', 'tranthib@example.com', '0987654321', '456 Đường B, Quận 2, TP.HCM', '1995-05-05'),
('Lê Văn C', 'levanc@example.com', '0912345678', '789 Đường C, Quận 3, TP.HCM', '1988-03-03');
INSERT INTO Tour (name, description, destination, duration, price, start_date, end_date) VALUES
('Tour Đà Nẵng', 'Khám phá vẻ đẹp của Đà Nẵng và Hội An.', 'Đà Nẵng', 4, 3000000, '2024-12-01', '2024-12-05'),
('Tour Nha Trang', 'Thư giãn trên những bãi biển tuyệt đẹp.', 'Nha Trang', 3, 2500000, '2024-12-10', '2024-12-13'),
('Tour Phú Quốc', 'Khám phá hòn đảo thiên đường.', 'Phú Quốc', 5, 4500000, '2024-12-15', '2024-12-20');
INSERT INTO TicketType (type_name, price) VALUES
('adult', 3000000),  -- Giá vé người lớn
('child', 1500000);  -- Giá vé trẻ em
INSERT INTO Booking (customer_id, tour_id, booking_date, status, total_price) VALUES
(1, 1, '2024-11-01', 'confirmed', 6000000),  -- 2 người lớn
(2, 2, '2024-11-05', 'pending', 2500000),    -- 1 người lớn
(3, 3, '2024-11-10', 'confirmed', 9000000);   -- 2 người lớn, 1 trẻ em
INSERT INTO BookingTicket (booking_id, ticket_type_id, quantity, total_price) VALUES
(1, 1, 2, 6000000),  -- 2 vé người lớn
(2, 1, 1, 3000000),  -- 1 vé người lớn
(3, 1, 2, 6000000),  -- 2 vé người lớn
(3, 2, 1, 1500000);  -- 1 vé trẻ em
INSERT INTO TicketDetail (booking_id, customer_name, age, ticket_type_id, price) VALUES
(1, 'Nguyễn Văn A', 34, 1, 3000000),  -- Người lớn
(1, 'Trần Thị B', 29, 1, 3000000),   -- Người lớn
(2, 'Trần Thị B', 29, 1, 3000000),   -- Người lớn
(3, 'Lê Văn C', 36, 1, 3000000),     -- Người lớn
(3, 'Lê Văn C', 36, 2, 1500000);     -- Trẻ em
